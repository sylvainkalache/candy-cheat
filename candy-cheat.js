// Grid total
//{ left : 10, top : 200, width : 620, height : 670 }};
var blue = "data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAZABkDAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDS+E/7PvjP4kQS3mk20dvbJ0nnPy/mK/rLP+M8Dk01Tr6vsj+dsHlFXMIudPYy/FPgu88Ha3JoF9Okk9v95kwQ1dWAzOOZ0VXo6Jnk16MKc3T6ozTZO/UcfSup1YQZzPzE/s5f7gq/avuQdp4N+OHjjQvCMHg3Sp0h00jEkQiETH/topDj8Gr5rM+D8Hi8U8XV1n6v8tj6aGZ1cDSdKnszKc3Oo3DahcwsC/3t8hcn8SSa76VOGGgqVPofPzk6k3ORbt9IE00Fv93zv4v7tYYiteDqLoRBe0qcqPSP+FCW/wD0P2j/APff/wBavk/9bZf8+pfh/me3/ZjPGtKk8C3lpDF53hq3mVdpcS30U8r/AO0HjlRfwAr7ess1pzk3zyT/AMFl+Kf3tnPJu2pPDf6lG2YLUSp6bs1pKjF/Gzimr62L41HWCcnThn2asJ4fDuLjfQxjL2cuaO50f/CYeL/+hf0b/wAGL/8Ax6vnf7CwHeX3f/anf/aeI7nznqf+rf8A6+K/VKnwnoz3PVfC3/HvXzWO3OCe50615TOVklIZ/9k="

var green = "data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAZABkDAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD6Euv2u9b1KzMNz4WhRyMZMmR/Kv50zLivFY2nyVLP5H5dieIq9WHI7fcebaj4oGuXMmpXFqsJl+8F4z+Ar86xEXOpdHxeKlKrK7IBqluYtxIz61MoS2RNVRS90i/t+L/niaPYz7nNqefxXJZPLjPH519JKjHdnpeynfUt22oXCDClse/NYSpUnuWqZLHqu1dsgJHpWLw+tzKpQcdWRf2k3/PD/wAeNX7KJnynM216U+7MPyFetOg3uj2vZtmjBq0n9xa5JYUXsiNtRjbqa3dNPciUHLcg/tA/3j+dL2MTP6sjAgr2ZbHqFu36fjXLMGLWRzDaoo//2Q=="

var orange = "data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAZABkDAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD6Bu7Lw98PPDFvHLFHe+KNSgWckufLtkPRSAcc89u1fyhiqGCwmEuleo+vY/ofDVcfneNm+ZqhBtetv0/M4T7S4ldZF+f77Y6ZPpXhwork55bs+yhRUaasSW7x3UZIXAc4B9xWfO07Eybi7pjvsFx/z2/Stbmfti7Foup6xb3+ueXJPHaukbyMS2d2cfgMfrXRToVJ0vb7o8+WY0MunHDPRv8Ar9TPhskjd9uTwQSSTn865qs1bQ9adbmSuWrSG3SyCqmFVj3PU157qPmOOpN3J/Lf1Nbe0Muc9F8D6rp9n8KvEVqzos9y8nkqQCVO1dvX6tX2mCxGGpZNKK+I+HzbC4nE5zSqPZflr/wDzKHKHyieRnPvwP8A69fEJt3Pv0mkhudmnyY/vrU+za1YqkFKVkWfPf8Avj8qLMz9l5F3Tf8AkB3f++v8hXpUf90Zx4j/AHiJlj/j5/CvPger9gY//IOk/wB8V1VNjOh/EXzFqTY//9k="

var purple = "data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAZABkDAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDy/wAQNo+ravnwdoFxp1rOI0gs2na6kLn3xnn05r+48BTr4PD/AO11FJrd2svuv09T+06dKtCj+9nzS72t+GtrephzM9m13Z3ltNHcRfu9jja0UgbBDD8xXpUJe3tKD0/TyZyVMQoQkra9P6WhqWp8Kf8ACLQxi31T/hIPPYzSlkFoIz0AH3s4/UmuGdLGrFOzj7K2m/Nf8rBl6q816luX06/5Gf8A6J/z9p+tXr/MenbD/wA6K0QuGlMkBkLxENvAwVI6EkdK9DnpzVmeOo1XP3bt/wBbl+W8udQhRbmSOVoizNIFG+RmOSXbq5z6k1jShTpP935aX0Vuy6fI9CEXUhaTvYoz7iOHIHqBW9k1qcla72ehW+b/AJ7SfrUe53OS8/5mXL9tQ09jpV3HPavIqSSRsNpIZQy579CDWVKMK8FODv5/g/8AI1rYp3VPv/W5s358JrBZp4bOplvJ/wBL+2iMDzf+mezt161x4OOKUpLEctr6ct9vO/X00PTwc/ccZW8rdvPz9NChqOn6hpF39k1TTp7efyhMYpIyp2Fd2fyrqpYulXhzU5JruvIwdSClzPX8vvuzp/8Ahbx/6EPwz/4BN/8AHK8P+yI/8/6v/gS/yOX2kf5p/ev8jA8ff8jIv/XjZf8ApKle5lH+6/8Ab0//AEuRx1viXz/9uMi1/hrdbs7sNtE37n/kPv8A9gT/ANsq8r7D/wAX/uQeI+J+n/txytdRyn//2Q=="

var red = "data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAZABkDAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD5zJr8Xeruz/UxuyILqEuuxemMVuqjg7o48VQdSPKtjr/gN8VJ/hT4yW2v5G/sfUnAlzjEL/3hX12UY+LilN6n88+I/CTxEHVpx1Pub/hcehf9BC2/77FfZ/Wafc/nT+xa38h+dqOGGTX43KNmf6K06nMiTcBWb1OnmsVr6wivIyGUcjFaUqs6Tujz8wy+ljoNSRQ+wX//AEG7z/v+3+Nex/bFU+J/1FwPZfciSzv0kbBNefVp66H0eBx8ajszT2qa55Qse/pLVjhwuKnmexdrKyIMH0qTnsc7p3369We58Ll250q9PwrkqH3VPYkPSuZnSiKkZH//2Q=="

var yellow = "data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAZABkDAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD68urlpZ10+1+SLOW29P8A630r/OeSTbqzd2z9koYenRp3aOrs4fIs4kYcN1rxanvT5jxqkuabsVdRb7KTcKN2eveuqjCNV+zRtRXtFysd/a2lf9BF/wDvs1p9SkY/VJ9jldJimlukQctJ9/3r0vYPENU6e57eKlGMD0S+tPsa29vIcu0e4+xrLN8reUxjGW7PlqNf2kpNbXMjUITJa7V7V49KbhO6PSoy5ZnKfYn9P0Fep7RHraD/AA1eKt6s8hzt6e1dftpYWXtIjzGg+Wx2EmqPeyNO8m6Rl2E4HSuLMMdVzKqpV9j55YT2StFaEkUK3CSqZQAvQVxUafNqEqjhNGLttf7o/M113PR9pLucno3RvrXdifhPfzDY6vTev4152K+BHhVti6P+W9ThfgPIrfxEZVaHef/Z"

// blue = 0
// green = 1
// orange = 2
// purple = 3
// red = 4
// yellow = 5

var img = new Image();
img.src = "file.jpg";

img.onload = function() {

    function create_array(array_size) {
	var combinations = new Array([]);
	for (var y = 0; y <= 10; y++) {
	    combinations[y] = new Array();
	}
	console.log('created array: '+y);
	test(combinations);
    }

    function find_color(combinations, y, i) {
	var options = { left : 32+(68*y), top : 222+(72*i), width : 25, height : 25 };
	Pixastic.process(img, "crop", options, function(processed_image) {

	    var canvas = processed_image.toDataURL('image/jpeg');
	    var colors = ['blue', 'green', 'orange', 'purple', 'red', 'yellow'];
	    var result = false;

	    for (z = 0; z < colors.length; z++) {
		result =  is_color(canvas, colors, y, i, z, combinations, function(result) {
		    combinations = result;
		});
	    }
	});
	return = combinations;
    }

    function is_color(canvas, colors, y, i, z, combinations, callback) {
	return resemble(canvas).compareTo(eval(colors[z])).onComplete(function(data) {
	    if (data['misMatchPercentage']<98) {
		combinations[y][i] = z;
		callback(combinations);
	    } else {
		callback(false);
	    }
	});
    };

    function test(combinations) {
	for (var y = 0; y <= 10; y++) {
	    for (var i = 0; i <= 10; i++) {
		find_color(combinations, y, i);
	    }
	}
    }

    create_array(9);
}
